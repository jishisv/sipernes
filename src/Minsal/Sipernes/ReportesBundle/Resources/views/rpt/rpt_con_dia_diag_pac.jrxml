<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="resumenIngresos" language="groovy" pageWidth="1008" pageHeight="612" orientation="Landscape" whenNoDataType="NoDataSection" columnWidth="968" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="4849e951-95ca-49ad-87e0-c35b0585b150">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<property name="ireport.jasperserver.reportUnit" value="/reports_siaps_seguimiento/siaps/seguimiento/rpt_con_dia_diag_pac"/>
	<property name="ireport.jasperserver.url" value="http://localhost:8080/jasperserver/services/repository"/>
	<style name="table">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_TH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_CH" mode="Opaque" backcolor="#BFE1FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<parameter name="id_servicio" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="codigoEmp" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="codigoExp" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="tipoEstable" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="fpini" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="fpfin" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="municipio" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[SELECT
  ctl_establecimiento.nombre Establecimiento,
mnt_expediente.id::integer codExp,
  mnt_expediente.numero Expediente,
  (mnt_paciente.primer_nombre || ' '|| mnt_paciente.segundo_nombre) as Paciente,
mnt_empleado.id::integer codEnf,
  mnt_empleado.idempleado CodigoEnfermera,
  mnt_empleado.nombreempleado NombreEnfermera,
  enf_ctl_diagnostico.nombre_diagnostico Diagnostico,
  enf_ctl_intervencion.descripcion_interven Intervencion
FROM
  enf_ctl_diagnostico,
  ctl_establecimiento,
  enf_ctl_intervencion,
  enf_mtl_intervencion,
  enf_mtl_diagnostico,
  enf_ctl_protocolo,
  enf_ctl_subprotocolo,
  mnt_empleado,
  mnt_expediente,
  mnt_paciente,
enf_clase
WHERE
  enf_mtl_intervencion.id_intervencion = enf_ctl_intervencion.id AND
enf_ctl_subprotocolo.id = enf_ctl_intervencion.id_subprotocolo AND
enf_ctl_subprotocolo.id_protocolo = enf_ctl_protocolo.id AND
  enf_mtl_diagnostico.id_ctl_diag = enf_ctl_diagnostico.id AND
  enf_ctl_diagnostico.id_clase = enf_clase.id and
  mnt_empleado.id = enf_mtl_diagnostico.id_emp_corr AND
  mnt_expediente.id = enf_mtl_diagnostico.id_expediente AND
  mnt_expediente.id_paciente = mnt_paciente.id AND

mnt_empleado.id = coalesce($P{codigoEmp},mnt_empleado.id) and
mnt_expediente.id = coalesce($P{codigoExp},mnt_expediente.id) and
enf_mtl_diagnostico.fecha_ingreso_diag >= coalesce(to_date($P{fpini},'DD-MM-YYYY'), enf_mtl_diagnostico.fecha_ingreso_diag) AND
enf_mtl_diagnostico.fecha_ingreso_diag <= coalesce(to_date($P{fpfin},'DD-MM-YYYY'), enf_mtl_diagnostico.fecha_ingreso_diag) and
ctl_establecimiento.id_municipio = coalesce($P{municipio},ctl_establecimiento.id_municipio) and
ctl_establecimiento.id = coalesce($P{tipoEstable}, ctl_establecimiento.id)

group by
Establecimiento,
codExp,
Expediente,
Paciente,
codEnf,
CodigoEnfermera,
NombreEnfermera,
Diagnostico,
Intervencion

order by Diagnostico]]>
	</queryString>
	<field name="establecimiento" class="java.lang.String"/>
	<field name="codexp" class="java.lang.Integer"/>
	<field name="expediente" class="java.lang.String"/>
	<field name="paciente" class="java.lang.String"/>
	<field name="codenf" class="java.lang.Integer"/>
	<field name="codigoenfermera" class="java.lang.String"/>
	<field name="nombreenfermera" class="java.lang.String"/>
	<field name="diagnostico" class="java.lang.String">
		<fieldDescription><![CDATA[Diagnostico de ingreso del paciente al hospital]]></fieldDescription>
	</field>
	<field name="intervencion" class="java.lang.String"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<pageHeader>
		<band height="89" splitType="Stretch">
			<staticText>
				<reportElement mode="Transparent" x="370" y="23" width="225" height="20" forecolor="#000000" backcolor="#FFFFFF" uuid="136f707f-ac98-45c9-9a57-a6a21c5f6b7e"/>
				<textElement textAlignment="Center" verticalAlignment="Middle" rotation="None" markup="none">
					<font fontName="SansSerif" size="12" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<text><![CDATA[UNIDAD DE ENFERMERIA]]></text>
			</staticText>
			<staticText>
				<reportElement mode="Transparent" x="370" y="43" width="225" height="20" forecolor="#000000" backcolor="#FFFFFF" uuid="abd08fca-1da9-40a7-969f-4ce5d9b55fa8"/>
				<textElement textAlignment="Center" verticalAlignment="Middle" rotation="None" markup="none">
					<font fontName="SansSerif" size="11" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<text><![CDATA[SIPERNES]]></text>
			</staticText>
			<staticText>
				<reportElement mode="Transparent" x="370" y="3" width="225" height="20" forecolor="#000000" backcolor="#FFFFFF" uuid="ee057968-9785-4e29-bbcd-08234a56fc03"/>
				<textElement textAlignment="Center" verticalAlignment="Middle" rotation="None" markup="none">
					<font fontName="SansSerif" size="13" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<text><![CDATA[MINISTERIO DE SALUD]]></text>
			</staticText>
			<image>
				<reportElement x="55" y="0" width="99" height="82" uuid="957a7dec-386f-4f26-815f-8cab05738c9a"/>
				<imageExpression><![CDATA["/var/www/sipernes/src/Minsal/Sipernes/ReportesBundle/Resources/views/rpt/imagenes/escudo.png"]]></imageExpression>
			</image>
			<image>
				<reportElement x="802" y="5" width="142" height="78" uuid="5a1f9a67-ec4b-4be8-9610-1d02a9b3de02"/>
				<imageExpression><![CDATA["/var/www/sipernes/src/Minsal/Sipernes/ReportesBundle/Resources/views/rpt/imagenes/minsal.jpg"]]></imageExpression>
			</image>
		</band>
	</pageHeader>
	<columnHeader>
		<band height="90" splitType="Stretch">
			<staticText>
				<reportElement x="163" y="6" width="639" height="30" uuid="e64a9520-07e9-4b0b-828f-5b026812eb03"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Consolidado de diagnósticos realizados por el personal de enfermería a pacientes hospitalarios]]></text>
			</staticText>
			<staticText>
				<reportElement style="table_CH" x="34" y="65" width="36" height="25" isPrintWhenDetailOverflows="true" backcolor="#999999" uuid="1e3a2612-7a57-4430-8a27-ee546d3546ff"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[N°]]></text>
			</staticText>
			<staticText>
				<reportElement style="table_CH" x="70" y="65" width="137" height="25" isPrintWhenDetailOverflows="true" backcolor="#999999" uuid="dca1bc49-12d1-465c-87d6-e2e7a9b278c8"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Establecimiento]]></text>
			</staticText>
			<staticText>
				<reportElement style="table_CH" x="288" y="65" width="149" height="25" isPrintWhenDetailOverflows="true" backcolor="#999999" uuid="1d661525-6453-4aed-a695-517d6e971f0e"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Nombre del paciente]]></text>
			</staticText>
			<textField pattern="dd/MM/yyyy h.mm a">
				<reportElement x="34" y="16" width="120" height="20" uuid="b9cba9ef-bfff-4289-b8ce-92e634f9b36e"/>
				<textElement verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement style="table_TH" x="437" y="65" width="75" height="25" isPrintWhenDetailOverflows="true" backcolor="#999999" uuid="31b584fa-0857-4fae-b55c-c5a5c90e982e"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Código Enfermera]]></text>
			</staticText>
			<staticText>
				<reportElement style="table_TH" x="207" y="65" width="81" height="25" isPrintWhenDetailOverflows="true" backcolor="#999999" uuid="30c7925d-4ed4-4529-aeac-a76bd5231075"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Expediente]]></text>
			</staticText>
			<staticText>
				<reportElement style="table_CH" x="512" y="65" width="175" height="25" isPrintWhenDetailOverflows="true" backcolor="#999999" uuid="0a87d0b3-330b-4a2f-a2c7-abe28a89e2a8"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Nombre del personal de enfermería]]></text>
			</staticText>
			<staticText>
				<reportElement style="table_CH" x="687" y="65" width="135" height="25" isPrintWhenDetailOverflows="true" backcolor="#999999" uuid="9cbf1a1a-98bd-4cbc-954c-6930247da413"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Diagnóstico]]></text>
			</staticText>
			<staticText>
				<reportElement style="table_CH" x="822" y="65" width="134" height="25" isPrintWhenDetailOverflows="true" backcolor="#999999" uuid="7251159d-fbdc-45d3-bb07-a3fa17751c4d"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Intervención]]></text>
			</staticText>
			<textField>
				<reportElement x="916" y="16" width="21" height="20" uuid="0d97999a-0563-4acb-9b0f-86ba2574213a"/>
				<textElement textAlignment="Right" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$V{PAGE_NUMBER}+"/"]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="874" y="16" width="42" height="20" uuid="a772e132-5238-4c30-bf84-19e9e22d4efc"/>
				<textElement textAlignment="Right" verticalAlignment="Middle"/>
				<text><![CDATA[Página]]></text>
			</staticText>
			<textField evaluationTime="Report">
				<reportElement x="936" y="16" width="20" height="20" uuid="f6cd0af9-e63b-48f8-819f-d42a5264a6bd"/>
				<textElement verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="288" y="41" width="165" height="15" uuid="61cb494d-2729-4b7b-8b55-48a45318198e"/>
				<textElement textAlignment="Right" verticalAlignment="Middle"/>
				<text><![CDATA[Fecha de datos consultados: Desde ]]></text>
			</staticText>
			<textField>
				<reportElement x="453" y="41" width="100" height="15" uuid="0afbc138-14b3-4831-ae77-f5b63ea81e73"/>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA["Desde "+ $P{fpini}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="553" y="41" width="100" height="15" uuid="6a92e1ae-c38b-4b8d-bd6e-469cd3e58ea3"/>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA["Hasta "+ $P{fpfin}]]></textFieldExpression>
			</textField>
		</band>
	</columnHeader>
	<detail>
		<band height="25" splitType="Stretch">
			<textField isStretchWithOverflow="true">
				<reportElement style="table" stretchType="RelativeToBandHeight" x="34" y="0" width="36" height="25" isPrintWhenDetailOverflows="true" uuid="be8ecd52-ab34-4c89-89a6-d09e6164aa4b"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{REPORT_COUNT}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement style="table" stretchType="RelativeToBandHeight" x="70" y="0" width="137" height="25" isPrintWhenDetailOverflows="true" uuid="90cf89bd-a5ec-4d7b-8825-2cee4422d0b0"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{establecimiento}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement style="table" stretchType="RelativeToBandHeight" x="288" y="0" width="149" height="25" isPrintWhenDetailOverflows="true" uuid="8af11664-a7be-4cf4-b2e3-11ea113a56f4"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{paciente}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement style="table" stretchType="RelativeToBandHeight" x="437" y="0" width="75" height="25" isPrintWhenDetailOverflows="true" uuid="7835633f-90c3-4f53-90ca-8e8065af7e46"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{codigoenfermera}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement style="table" stretchType="RelativeToBandHeight" x="207" y="0" width="81" height="25" isPrintWhenDetailOverflows="true" uuid="e486d2c5-b1d3-46ae-aa12-6dca632766d5"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{expediente}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement style="table" stretchType="RelativeToBandHeight" x="512" y="0" width="175" height="25" isPrintWhenDetailOverflows="true" uuid="4565e61c-4542-4acc-a6b3-6b94d1998b96"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{nombreenfermera}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement style="table" stretchType="RelativeToBandHeight" x="687" y="0" width="135" height="25" isPrintWhenDetailOverflows="true" uuid="b74be94d-270e-4124-b0ae-6341397b67ed"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{diagnostico}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement style="table" stretchType="RelativeToBandHeight" x="822" y="0" width="134" height="25" isPrintWhenDetailOverflows="true" uuid="0bee8411-4b82-4ae8-aa77-7614f887b834"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{intervencion}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<pageFooter>
		<band height="20" splitType="Stretch"/>
	</pageFooter>
	<summary>
		<band height="50">
			<textField>
				<reportElement style="table" stretchType="RelativeToBandHeight" mode="Opaque" x="822" y="0" width="134" height="25" isPrintWhenDetailOverflows="true" uuid="a69325e4-5980-4edd-b9fb-f1a43a454318"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="9" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{REPORT_COUNT}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement style="table" stretchType="RelativeToBandHeight" mode="Opaque" x="34" y="0" width="788" height="25" isPrintWhenDetailOverflows="true" uuid="8b0155d1-217b-4b01-ba44-dc31d8e2badc"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="9" isBold="true"/>
				</textElement>
				<text><![CDATA[TOTAL DE REGISTROS]]></text>
			</staticText>
		</band>
	</summary>
	<noData>
		<band height="50">
			<staticText>
				<reportElement x="343" y="14" width="270" height="20" uuid="74606d9f-c611-4890-98ed-bd52ad76f662"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="16" isBold="true"/>
				</textElement>
				<text><![CDATA[No hay datos que mostrar]]></text>
			</staticText>
		</band>
	</noData>
</jasperReport>
